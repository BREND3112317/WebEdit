<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" http-equiv="Content-Type" content="width=device-width, initial-scale=1.0">
    <title>Main - WebCoding</title>
    <link href="/static/css/font-face.css" rel="stylesheet" crossorigin="anonymous">
    <link href="/node_modules/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <link href="/node_modules/@fortawesome/fontawesome-free/css/all.min.css" rel="stylesheet" crossorigin="anonymous">
    <link
		rel="stylesheet"
		data-name="vs/editor/editor.main"
		href="/node_modules/monaco-editor/min/vs/editor/editor.main.css"
	/>

    <style>
        body {
            font-family: -apple-system,BlinkMacSystemFont, "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Noto Sans TC", sans-serif;
        }

        .list-group-item {
            width: 100%;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- <label for="basic-url" class="form-label">Your vanity URL</label> -->
        <div class="d-flex flex-column justify-content-center align-items-center mt-5 mb-3">
            <div class="text-center">
                <h1 class="display-3">FileFolderSystem Demo - WebEdit</h1>
            </div>
            <div class="input-group mt-3">
                <span class="input-group-text" id="api">http://127.0.0.1:3000/api/folder/</span>
                <input type="text" class="form-control" id="api-url" aria-describedat="api" value="./">
                <button class="btn btn-outline-primary" type="button" id="call-api">Button</button>
            </div>
        </div>
        <div class="d-flex justify-content-center align-items-start">
            <ul id="menu" class="list-group list-group-flush d-flex flex-column justify-content-center align-items-start"></div>
        </div>
    </div>    
    <script>
        var require = { paths: { vs: './node_modules/monaco-editor/min/vs' } };
        var folderAPI_url = "http://127.0.0.1:3000/api/folder/";
        document.addEventListener("DOMContentLoaded", function () {
            console.log(document.getElementById("call-api"));
            document.getElementById("call-api").addEventListener("click", function () {
                callAPI();
            })
            callAPI();
        })

        callAPI = function () {
            var api_url = document.getElementById("api-url");
            // console.log("test", folderAPI_url + encodeURIComponent(api_url.value), );
            AJAX.get(
                folderAPI_url + encodeURIComponent(api_url.value), 
                {
                    success: function (data) {
                        cSystemCall.notify(data, "folder list");
                        var menu = document.getElementById("menu")
                        menu.innerHTML = "";
                        for(var i in data.dirents) {
                            var new_li = document.createElement("li");
                            new_li.className = "list-group-item"
                            new_li.innerHTML = `${data.dirents[i].isFolder ? `<i class="far fa-folder me-1"></i>` : `<i class="far fa-file me-1"></i>`}${data.dirents[i].name}`
                            menu.append(new_li);
                        }
                    }
                }
            );
        }
    </script>
    <script type="text/javascript" src="/static/js/request.js"></script>
    <script src="/node_modules/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/node_modules/@fortawesome/fontawesome-free/js/all.min.js"></script>
    <script src="/node_modules/monaco-editor/min/vs/loader.js"></script>
    <script src="/node_modules/monaco-editor/min/vs/editor/editor.main.nls.js"></script>
    <script src="/node_modules/monaco-editor/min/vs/editor/editor.main.js"></script>
</body>
</html>